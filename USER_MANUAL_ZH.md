# Qwen 多角度相机控制 - 用户手册

## 目录
1. [简介](#简介)
2. [入门指南](#入门指南)
3. [单图像模式](#单图像模式)
4. [多图像模式](#多图像模式)
5. [相机运动模式](#相机运动模式)
6. [技巧与最佳实践](#技巧与最佳实践)
7. [故障排除](#故障排除)

---

## 简介

Qwen 多角度相机控制是一个使用人工智能生成图像不同视角的 Web 应用程序。它通过 fal.ai API 使用 Qwen Image Edit 2511 多角度模型来创建逼真的视角转换。

### 主要功能
- **3D 相机控制**：带有可拖动控件的交互式可视化
- **多种模式**：单图像、多图像关键帧和视频生成
- **AI 驱动**：使用最先进的 Qwen 和 Seedance 模型
- **双语支持**：中英文界面
- **无需安装**：完全在浏览器中运行

---

## 入门指南

### 前置要求
1. 现代网络浏览器（Chrome、Firefox、Safari 或 Edge）
2. fal.ai API 密钥（[在此获取](https://fal.ai/dashboard/keys)）
3. 互联网连接

### 初始设置

**[建议截图：显示带有 API 密钥输入字段的标题栏]**

1. **打开应用程序**
   - 在浏览器中打开 `index.html`
   - 或访问已部署的版本 URL

2. **输入您的 API 密钥**
   - 找到右上角的"fal.ai API 密钥"字段
   - 如果没有密钥，点击"获取密钥"链接
   - 输入您的 API 密钥
   - 点击眼睛图标显示/隐藏密钥
   - 您的密钥安全地存储在浏览器本地存储中

3. **选择语言**
   - 点击右上角的语言选择器（🌐）
   - 在 English 或简体中文之间选择

---

## 单图像模式

此模式从不同的相机角度生成单个图像。

**[建议截图：显示单图像选项卡，包含所有三个面板]**

### 步骤 1：上传图像

**[建议截图：显示带有拖放操作的上传区域]**

您有两个选项：

**选项 A：上传文件**
1. 点击"输入图像"上传区域
2. 选择图像文件（JPG、PNG、WebP 或 GIF）
3. 或直接将图像拖放到上传区域
4. 最大文件大小：20MB

**选项 B：使用 URL**
1. 在"或粘贴 URL"字段中粘贴图像 URL
2. 点击"加载"按钮
3. 图像将被加载以供处理

**提示**：点击上传图像上的 × 按钮清除它并重新开始。

### 步骤 2：调整相机位置

您可以使用两种方法控制相机：

**[建议截图：显示带有标记手柄的 3D 视口]**

**方法 A：3D 交互控制**
1. **方位角手柄**（粉色球体）：拖动以水平旋转相机
   - 0° = 正面视图
   - 90° = 右侧
   - 180° = 背面
   - 270° = 左侧

2. **仰角手柄**（青色球体）：拖动以调整垂直角度
   - -30° = 低角度（仰视）
   - 0° = 平视
   - 90° = 鸟瞰（俯视）

3. **距离手柄**（金色球体）：拖动以调整缩放
   - 0 = 广角镜头（远）
   - 5 = 中等距离
   - 10 = 特写

**[建议截图：显示滑块控制面板]**

**方法 B：手动滑块**
1. 使用"手动控制"部分中的滑块
2. 每个滑块实时显示当前值
3. 通过点击滑块上的特定位置微调数值

### 步骤 3：查看 API 参数

**[建议截图：显示 API 参数面板]**

"API 参数"面板显示：
- `horizontal_angle`：当前方位角（度）
- `vertical_angle`：当前仰角（度）
- `zoom`：当前距离值

这些值将发送到 AI 模型进行生成。

### 步骤 4：生成图像

**[建议截图：显示生成按钮和输出面板]**

1. 点击 **"生成"** 按钮
2. 等待生成过程（通常需要 5-15 秒）
3. 观察调试日志以获取进度更新
4. 生成的图像显示在"输出"面板中

### 步骤 5：下载结果

**[建议截图：显示输出图像下方的下载按钮]**

1. 生成完成后，将出现"下载"按钮
2. 点击它将图像保存到您的计算机
3. 文件保存为 `qwen-multiangle-[时间戳].png`

### 调试日志

**[建议截图：显示展开的调试日志面板]**

"🔧 调试日志"面板显示：
- 上传状态
- API 调用详情
- 模型响应
- 错误消息（如有）
- 点击"清除"重置日志

---

## 多图像模式

此模式沿自定义路径创建多个相机角度关键帧。

**[建议截图：显示多图像选项卡的三面板布局]**

### 步骤 1：上传图像

与单图像模式相同的过程：
- 上传文件或粘贴 URL
- **自动同步**：如果从已加载图像的单图像选项卡切换，它将自动同步

### 步骤 2：创建相机路径

**[建议截图：显示带有路径点标记的 3D 球体]**

1. **悬停在球体上**以预览相机位置
2. **滚动鼠标滚轮**调整当前位置的缩放级别
   - 缩放值显示在副标题中（例如"缩放：5.0"）
3. **点击球体**添加路径点（相机位置）
4. 添加 2-4 个路径点以创建相机路径
5. 青色线连接您的路径点，显示相机轨迹

**路径控制**：
- **全部清除**：删除所有路径点并重新开始
- **撤销**：删除最后添加的路径点

### 步骤 3：查看路径点

**[建议截图：显示路径点列表面板]**

"路径点"面板显示：
- 路径点编号
- 方位角、仰角和缩放值
- 各个路径点的删除按钮（× 图标）
- 显示当前/最大路径点的计数器（例如"2/4"）

### 步骤 4：生成关键帧

**[建议截图：显示生成所有关键帧按钮和进度条]**

1. 点击 **"生成所有关键帧"** 按钮
2. 观察进度条显示"X/Y"完成情况
3. 每个路径点按顺序处理
4. 当路径点的图像生成后变为绿色
5. 生成时间：每个关键帧约 5-15 秒

### 步骤 5：查看和下载关键帧

**[建议截图：显示生成的关键帧画廊]**

**画廊视图**：
- 关键帧显示在"已生成的关键帧"面板中
- 悬停在任何关键帧上可看到：
  - 关键帧编号标签
  - 下载按钮（悬停时出现）

**下载选项**：
1. **单独下载**：点击任何关键帧上的下载图标
2. **下载全部为 ZIP**：点击面板标题中的"下载全部（ZIP）"按钮
   - 所有关键帧打包成一个 ZIP 文件
   - 文件命名为 `keyframe-1.png`、`keyframe-2.png` 等

---

## 相机运动模式

此模式从您生成的关键帧创建视频。

**[建议截图：显示相机运动选项卡]**

### 前置条件

您必须首先在多图像模式中生成关键帧。

**重要提示**（在界面中显示）：
> "提示：首先在多图像中生成关键帧，然后来这里创建相机运动视频。"

### 选择视频模式

**[建议截图：显示两个模式按钮 - 快速拼接和 AI 视频]**

您有两个选项：

#### 选项 1：快速拼接（即时）

**优点**：
- 即时生成（无需排队）
- 在浏览器中运行
- 可自定义过渡

**[建议截图：显示快速拼接设置面板]**

**设置**：
1. **总时长**：3-8 秒
2. **过渡样式**：
   - 升降缩放：带平移的放大/缩小
   - 平滑摇移：图像之间滑动
   - 快速摇移：快速运动模糊效果
   - 移动缩放：相反的缩放方向
3. **帧率**：24 帧/秒（电影感）、30 帧/秒或 60 帧/秒（流畅）
4. **缓动**：缓入缓出、缓出、线性或弹跳

#### 选项 2：AI 视频（Seedance）

**优点**：
- AI 生成的平滑过渡
- 更自然的相机运动
- 专业质量

**[建议截图：显示 AI 视频设置面板]**

**设置**：
1. **运动提示词**：描述相机运动
   - 默认："The camera very slowly and smoothly lowers on a boom..."
   - 自定义以获得不同效果
2. **分辨率**：480p（更快）或 720p
3. **每对时长**：1-3 秒（加速后）
4. **循环路径**：勾选以创建从最后一帧回到第一帧的循环

**注意**：AI 视频使用基于队列的处理，因此根据服务器负载，生成可能需要几分钟。

### 生成视频

**[建议截图：显示创建视频按钮和进度指示器]**

1. 点击 **"创建视频"** 按钮
2. 对于快速拼接：
   - 进度条显示帧渲染
   - 大约需要视频时长来渲染
3. 对于 AI 视频：
   - 显示队列状态和渲染进度
   - 每个片段可能需要几分钟
   - 使用智能缓存避免重新生成相同片段

### 预览和下载

**[建议截图：显示带有下载按钮的最终视频播放器]**

1. 视频显示在"最终视频"面板中
2. 点击播放/暂停
3. 视频自动循环
4. 点击 **"下载视频"** 按钮
   - 快速拼接：保存为 `.webm` 格式
   - AI 视频：保存为 `.mp4` 格式

---

## 技巧与最佳实践

### 图像选择

**[建议截图：显示好的与差的图像选择示例]**

✅ **好的图像**：
- 主体清晰，边缘明确
- 光线良好
- 背景杂乱最小
- 中等分辨率（1024x1024 或更高）

❌ **避免**：
- 非常小的图像（< 512x512）
- 极大的文件（> 20MB）
- 严重压缩的 JPEG
- 主体上有水印的图像

### 相机角度

**最佳结果**：
- 适度的角度变化（30-90° 旋转）
- 保持仰角在 -30° 到 60° 之间以获得自然外观
- 对大多数主体使用缩放 3-7
- 避免极端组合（例如 90° 仰角 + 10 缩放）

### 多图像路径

**路径规划**：
- 在尝试 4 个之前，先从 2-3 个路径点开始
- 均匀分布路径点以获得平滑运动
- 避免路径点之间的剧烈跳跃
- 首先在单图像模式中测试每个路径点

### 视频创建

**快速拼接**：
- 对大多数视频使用 30 帧/秒（良好平衡）
- 选择 24 帧/秒以获得电影感
- 仅在平滑、慢动作效果时使用 60 帧/秒
- 升降缩放适用于大多数主体

**AI 视频**：
- 编写描述性运动提示词以获得更好结果
- 从 720p 开始（如果速度至关重要则使用 480p）
- 使用缓存功能：相同设置重用以前的渲染
- 循环路径创建无缝循环

### 性能

- 关闭不必要的浏览器选项卡
- 使用 Chrome 或 Edge 以获得最佳性能
- 如果遇到问题，清除浏览器缓存
- 检查调试日志以获取错误详情

---

## 故障排除

### 常见问题

**[建议截图：显示带有错误消息的调试日志面板]**

#### 问题："请输入您的 fal.ai API 密钥"
- **解决方案**：在右上角字段中输入您的 API 密钥
- 验证密钥正确（无空格或额外字符）

#### 问题："API 密钥无效"或 401 错误
- **解决方案**：
  1. 访问 https://fal.ai/dashboard/keys
  2. 验证您的密钥是否有效
  3. 如需要，生成新密钥
  4. 清除浏览器存储并重新输入

#### 问题：图像上传失败
- **检查**：文件类型是 JPG、PNG、WebP 或 GIF
- **检查**：文件大小小于 20MB
- **尝试**：改用 URL 方法

#### 问题：生成的图像看起来不正确
- **查看**：API 参数面板中的相机参数
- **尝试**：不同的角度组合
- **检查**：原始图像质量
- **注意**：模型在光线充足、主体清晰的情况下效果最佳

#### 问题：视频生成卡住
- **快速拼接**：
  - 检查浏览器控制台错误（F12）
  - 尝试更短的时长或更低的帧率
- **AI 视频**：
  - 检查调试日志以获取队列状态
  - 等待 - 服务器可能很忙
  - 如果超时，稍后重试

#### 问题：无法预览 URL 图像
- **注意**：这通常是由于 CORS 限制
- **不用担心**：生成仍然有效
- **替代方案**：下载图像并作为文件上传

#### 问题：视频下载失败
- **备用方案**：浏览器在新标签页中打开视频
- **手动保存**：右键点击视频 → "视频另存为..."

### 调试日志解读

**[建议截图：显示带有颜色的不同日志条目类型]**

**日志颜色**：
- **绿色（信息）**：正常操作
- **红色（错误）**：停止进程的问题
- **橙色（警告）**：可能影响质量的问题
- **蓝色（请求）**：正在进行的 API 调用
- **粉色（响应）**：从 API 接收的数据

**常见日志消息**：
- `"配置 fal 客户端..."` - 开始 API 设置
- `"上传图像到 fal 存储..."` - 将图像发送到服务器
- `"开始模型推理..."` - AI 正在处理
- `"收到结果！"` - 生成完成
- `"错误：..."` - 检查错误详情

### 获取帮助

如果遇到持续问题：

1. **检查调试日志**：查找特定错误消息
2. **尝试不同设置**：简化参数
3. **使用不同图像测试**：验证不是图像特定问题
4. **浏览器控制台**：按 F12 查看技术错误
5. **报告问题**：包括：
   - 浏览器类型和版本
   - 日志中的错误消息
   - 重现步骤
   - 问题截图

### 浏览器兼容性

**完全支持**：
- Chrome 90+
- Edge 90+
- Firefox 88+
- Safari 14+

**有限支持**：
- 旧版浏览器可能在视频录制方面存在问题
- 更新到最新版本以获得最佳结果

---

## 键盘快捷键

- **Ctrl/Cmd + Z**：撤销最后一个路径点（在多图像模式中）
- **鼠标滚轮**：在路径规划模式中调整缩放

---

## 隐私和数据

- **API 密钥**：仅存储在浏览器本地存储中（从不发送给第三方）
- **图像**：上传到 fal.ai 进行处理（查看他们的隐私政策）
- **视频**：客户端生成（快速拼接）或通过 Seedance API
- **无需账户**：无需注册或个人数据收集

---

## 致谢

- **模型**：阿里巴巴/Qwen 的 Qwen Image Edit 2511 多角度
- **API 提供商**：[fal.ai](https://fal.ai/)
- **视频生成**：字节跳动的 Seedance 1.5
- **灵感来源**：Hugging Face 上的 [multimodalart/qwen-image-multiple-angles-3d-camera](https://huggingface.co/spaces/multimodalart/qwen-image-multiple-angles-3d-camera)

---

## 许可证

MIT 许可证 - 免费使用和修改

---

**版本**：1.0
**最后更新**：2026 年 1 月

技术文档请参阅 README.md
